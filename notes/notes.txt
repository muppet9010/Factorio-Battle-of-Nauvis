For vehicle movement use the code from: https://github.com/smcpeak/factorio-robotank
Have to be vehicles and not units so they can move and fire, plus have concept of guns on them rotating.